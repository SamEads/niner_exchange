{% extends "base.html" %}

{% block title %}{{ user }}{% endblock %}

{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='user.css') }}"/>
{% endblock %}

{% block content %}

<div class="user-profile">
    <div class="profile-icon" onclick="document.getElementById('profile').click();">
        <img width="24" height="24" src="https://img.icons8.com/material-rounded/24/user.png" alt="user"/>
    </div>
    <div class="user-info">
        <h2>{{ acc_name }}</h2>
        <p>{{ class_lv }} year student at UNC Charlotte</p>
        <p>Member since {{ member_since }}</p>
    </div>
</div>

<div class="stars">
    {% for i in range(1, 6) %}
    {% if i <= rating %}
    ★
    {% else %}
    ☆
    {% endif %}
    {% endfor %}
</div>

<div class="home">
    <button class="home-button" onclick="window.location.href='home.html'">
        Return to Home
    </button>
</div>

<div>
    &nbsp;
</div>

{% if acc_name == session['username'] %}
<div>
    <form action="/delete" method="POST" onsubmit="return confirm('Are you sure you want to delete your account?');">
        <button class="btn btn-danger" type="submit">
            Delete Account
        </button>
    </form>
</div>
{% else %}

{% endif %}

<div>
    &nbsp;
</div>

{% if acc_name != session['username'] %}
    {% if can_rate %}
    <div class="ratings">
        <form action="/rate" method="POST" id="rating-form" required>
            <label for="rating">Rate this user:</label>
            <select name="rating" id="rating" required>
                <option value="">Select rating</option>
                <option value="1">1 Star</option>
                <option value="2">2 Stars</option>
                <option value="3">3 Stars</option>
                <option value="4">4 Stars</option>
                <option value="5">5 Stars</option>
            </select>

            <input type="hidden" name="rated_user" value="{{ acc_name }}">
            <button type="submit" class="rate-button">Submit Rating</button>
        </form>
    </div>
    {% else %}
        <p>You must send and receive a message to this user before you can rate them</p>
    {% endif %}
{% endif %}


<div>
    &nbsp;
</div>


<form action="/upload" method="POST" enctype="multipart/form-data">
    <label for="profile" style="display: none;">Profile Picture:</label>
    <input type="file" name="profile" id="profile" accept="image/*">
</form>

{% endblock %}
